;class RegionsChoose{constructor(){this.origamiMenuCity=null,this.questionRegionId=null,this.loctionList=null,this.rootId="regions_choose_component",this.rootDropDownId="regions_choose_component_dropdown",this.selectRegionID="regon_choose_select-city__modal",this.selectRegionOverlayID="regon_choose_modal__overlay",this.getRegion(),this.root=document.getElementById(this.rootId),this.rootDropDown=document.getElementById(this.rootDropDownId),this.selectRegion=document.getElementById(this.selectRegionID),this.selectRegionOverlay=document.getElementById(this.selectRegionOverlayID),this.setEvents()}getEntity(t,e,i=!1){return t&&e?i?t.querySelectorAll('[data-entity="'+e+'"]'):t.querySelector('[data-entity="'+e+'"]'):null}setEvents(){const t=this.getEntity(this.rootDropDown,"select-city__dropdown__choose__yes"),e=this.getEntity(this.rootDropDown,"select-city__dropdown__choose__no"),i=this.getEntity(this.root,"open_region"),o=this.getEntity(this.selectRegion,"select-city__close"),n=this.getEntity(this.selectRegion,"select-city__modal__submit__input");this.addSelectBatnEvent(this.selectRegion,n),window.addEventListener("load",()=>{this.origamiMenuCity=document.getElementById("menu-city"),this.origamiMenuCity&&this.origamiMenuCity.addEventListener("click",t=>{"menu-city"===t.target.id&&this.onShowALLRegions()})}),t.addEventListener("click",()=>this.onSetRegion(this.questionRegionId)),e.addEventListener("click",()=>{this.onShowALLRegions(),this.dropDownShow(!1)}),i.addEventListener("click",()=>this.onShowALLRegions()),o.addEventListener("click",()=>this.onSelectRegionShow(!1)),n.addEventListener("input",t=>this.onInputSearch(t))}addSelectBatnEvent(t,e){this.getEntity(t,"select-city__modal__submit__btn").addEventListener("click",()=>{const i=Object.keys(this.loctionList).filter(t=>e.value.toLowerCase()===this.loctionList[t].toLowerCase());0!==i.length?(this.onSetRegion(i[0]),this.onSelectRegionShow(!1)):this.getEntity(t,"select-city__modal__submit__block-wrap__input_wrap_error").setAttribute("style","")})}onSetRegion(t){BX.ajax.runAction("kit:regions.ChooseComponentController.setRegion",{data:{regionId:t}}).then(t=>t.data.actions.forEach(e=>this[e](t.data)),t=>console.log(t))}dropDownShow(t){t?this.rootDropDown.setAttribute("style","display: block;"):this.rootDropDown.setAttribute("style","display: none;")}onShowALLRegions(){BX.ajax.runAction("kit:regions.ChooseComponentController.showLocations",{}).then(t=>t.data.actions.forEach(e=>this[e](t.data)),t=>console.log(t))}getRegion(){const t=new URLSearchParams(window.location.search);this.removeRegionGetParams(t),BX.ajax.runAction("kit:regions.ChooseComponentController.getRegion",{data:{redirectRegionId:t.get("redirectRegionId")}}).then(t=>t.data.actions.forEach(e=>this[e](t.data)),t=>console.log(t))}onSelectRegionShow(t){const e=document.getElementById("menu-header-three");if(e&&e.classList.contains("show")&&this.origamiMenuCity){let e=null;if(t){if(this.origamiMenuCity.querySelector(`#${this.selectRegionID}`))e=this.origamiMenuCity.querySelector(`#${this.selectRegionID}`);else{(e=this.selectRegion.cloneNode(!0)).classList.forEach(t=>{e.classList.remove(t)}),e.classList.add("select-city__modal_for_menu");const t=this.getEntity(e,"select-city__modal__submit__input");this.addSelectBatnEvent(e,t)}e.setAttribute("style","display: block;"),this.getEntity(e,"select-city__close").addEventListener("click",()=>this.onSelectRegionShow(!1)),this.origamiMenuCity.append(e)}else{this.origamiMenuCity.querySelector(`#${this.selectRegionID}`).setAttribute("style","display: none;")}return e}return t?(this.selectRegion.setAttribute("style","display: block;"),this.selectRegionOverlay.setAttribute("style","display: block;")):(this.selectRegionOverlay.setAttribute("style","display: none;"),this.selectRegion.setAttribute("style","display: none;")),this.getEntity(this.selectRegion,"select-city__modal__submit__block-wrap__input_wrap_error").setAttribute("style","display: none;"),this.selectRegion}SHOW_REGION_NAME({currentRegionName:t}){this.getEntity(this.root,"open_region").innerText=t,this.getEntity(this.selectRegion,"select-city__js").innerText=t}SHOW_QUESTION({currentRegionName:t,currentRegionId:e}){this.questionRegionId=e,this.dropDownShow(!0);const i=this.getEntity(this.rootDropDown,"select-city__dropdown__title");i.innerText=i.textContent.replace("###",t).trim()}CONFIRM_DOMAIN({currentRegionName:t}){this.dropDownShow(!1),this.getEntity(this.root,"open_region").innerText=t,this.getEntity(this.selectRegion,"select-city__js").innerText=t}SHOW_SELECT_REGIONS({allRegions:t}){const e=this.onSelectRegionShow(!0),i=this.getEntity(e,"select-city__modal__list").childNodes.length;if(null!==this.loctionList&&i>3)return;const o=this.getEntity(e,"select-city__modal__list");this.loctionList=t;let n=0;for(let e in t){const i=document.createElement("p");if(i.setAttribute("data-entity","select-city__modal__list__item"),i.setAttribute("class","select-city__modal__list__item"),i.innerText=t[e],i.addEventListener("click",()=>{this.onSetRegion(e),this.onSelectRegionShow(!1)}),o.append(i),++n>14)return}}REDIRECT_TO_SUBDOMAIN({currentRegionCode:t,currentRegionId:e}){const i=window.location.hostname,o=window.location.protocol,n=window.location.href.replace(i,t),s=new URL(n,`${o}${t}`);s.searchParams.set("redirectRegionId",e),window.location.href=s.toString()}CONFIRM_CITY({}){}onInputSearch(t){this.getEntity(this.selectRegion,"regions_vars",!0).forEach(t=>t.remove());const e=t.currentTarget.value,i=this.getEntity(this.selectRegion,"select-city__modal__submit__vars");if(this.getEntity(this.selectRegion,"select-city__modal__submit__block-wrap__input_wrap_error").setAttribute("style","display: none;"),e.length<2)return void i.setAttribute("style","display: none;");const o=t.currentTarget,n=Object.keys(this.loctionList).filter(t=>new RegExp(e,"i").test(this.loctionList[t]));n.length>0?i.setAttribute("style","display: block;"):i.setAttribute("style","display: none;"),n.forEach(t=>{const e=document.createElement("div");e.setAttribute("data-entity","regions_vars"),e.setAttribute("class","regions_vars"),e.setAttribute("tabindex",0),e.innerText=this.loctionList[t],e.addEventListener("click",()=>{o.value=this.loctionList[t],this.getEntity(this.selectRegion,"regions_vars",!0).forEach(t=>t.remove()),i.setAttribute("style","display: none;")}),i.append(e)})}removeRegionGetParams(t){if(t.has("redirectRegionId")){const t=new URL(window.location.href,window.location.href);t.searchParams.delete("redirectRegionId"),window.history.replaceState(null,"",t)}}};